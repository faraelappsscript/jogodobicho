<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRIE UMA IMAGEM DE DIVULGA√á√ÉO - 77x Brasil</title>
    
    <!-- Carregamento de depend√™ncias -->
    <link rel="preload" href="/assets/fonts/inter.css" as="style">
    <link rel="stylesheet" href="/assets/fonts/inter.css">
    <link rel="preload" href="/assets/fonts/jetbrains-mono.css" as="style">
    <link rel="stylesheet" href="/assets/fonts/jetbrains-mono.css">
    <link rel="preload" href="/theme.css" as="style">
    <link rel="stylesheet" href="/theme.css">
    
    <!-- ESTILOS PERSONALIZADOS PARA ESTA P√ÅGINA -->
    <style>
        /* Estilos espec√≠ficos da p√°gina imagem.html */
        body {
            background-color: var(--bg-primary);
            background-image: 
                radial-gradient(circle at 15% 25%, rgba(59, 130, 246, 0.1), transparent 40%),
                radial-gradient(circle at 85% 75%, rgba(139, 92, 246, 0.1), transparent 40%);
        }
        
        .container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            padding: var(--spacing-md);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
            max-width: 600px;
            margin-bottom: var(--spacing-xl);
            padding-top: var(--spacing-lg);
        }

        .main-title {
            font-size: clamp(2.5rem, 6vw, 3.5rem);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: var(--spacing-md);
            text-align: center;
            font-family: 'Inter', sans-serif;
            background: var(--gradient-accent);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            color: var(--text-primary);
        }

        .palpites-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 700px;
        }

        .palpites-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0.8;
        }

        .palpites-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            border-color: var(--border-accent);
        }

        .card-subtitle {
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            font-family: 'Inter', sans-serif;
        }

        .palpite-row {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            flex-wrap: wrap;
            padding: var(--spacing-md);
            background: var(--bg-card);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }

        .palpite-row .select-group-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            background: var(--gradient-primary);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            transition: all var(--transition-normal);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .palpite-row .select-group-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .palpite-row .group-info {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.9rem;
            margin-right: var(--spacing-sm);
        }

        .palpite-row .input-xy-container {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .palpite-row .input-xy {
            display: flex;
            align-items: center;
            gap: 2px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            padding: 2px;
        }

        .palpite-row .input-x, .palpite-row .input-y {
            width: 35px;
            height: 35px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .palpite-row .input-x {
            background-color: var(--bg-card);
        }

        .palpite-row .input-y {
            background-color: var(--bg-primary);
            cursor: not-allowed;
            border: none;
            color: var(--accent-success);
        }

        .palpite-row .clear-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            transition: all var(--transition-normal);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .palpite-row .clear-btn:hover {
            background-color: var(--bg-card-hover);
            border-color: var(--border-accent);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            margin-top: var(--spacing-xl);
            flex-wrap: wrap;
        }

        .action-buttons .btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-md);
            background: var(--gradient-primary);
            color: white;
            border: none;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            text-decoration: none;
            cursor: pointer;
            font-weight: 700;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-buttons .btn.secondary {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .action-buttons .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl), var(--shadow-glow);
        }

        /* Modal de sele√ß√£o de grupo */
        .modal-group-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .modal-group-list li {
            padding: var(--spacing-sm) var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .modal-group-list li:last-child {
            border-bottom: none;
        }

        .modal-group-list li:hover {
            background-color: var(--bg-card-hover);
        }

        /* Estilos para a imagem gerada no modal de visualiza√ß√£o */
        .generated-image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .generated-image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* Estilos para o footer */
        .site-footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: var(--spacing-lg) 0;
            margin-top: var(--spacing-2xl);
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .footer-logo {
            max-width: 100px;
            height: auto;
            margin-bottom: var(--spacing-md);
        }

        .site-domain, .copyright-text {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin: var(--spacing-xs) 0;
        }

        /* Responsividade melhorada */
        @media (max-width: 767px) {
            .main-title { 
                font-size: clamp(1.8rem, 5vw, 2.2rem); 
                margin-bottom: var(--spacing-lg);
            }
            
            .card-subtitle {
                font-size: clamp(1.2rem, 3.5vw, 1.4rem);
                margin-bottom: var(--spacing-lg);
            }
            
            .palpites-card {
                padding: var(--spacing-md);
                margin-bottom: var(--spacing-lg);
            }
            
            .palpite-row {
                flex-direction: column;
                align-items: stretch;
                gap: var(--spacing-md);
                padding: var(--spacing-md);
            }

            .palpite-row .select-group-btn, 
            .palpite-row .clear-btn {
                width: 100%;
                padding: var(--spacing-md);
                font-size: 1rem;
                margin-bottom: var(--spacing-sm);
            }

            .palpite-row .group-info {
                text-align: center;
                margin: 0;
                font-size: 1rem;
                margin-bottom: var(--spacing-sm);
            }

            .palpite-row .input-xy-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: var(--spacing-sm);
                width: 100%;
            }

            .palpite-row .input-xy {
                justify-content: center;
                padding: var(--spacing-sm);
                background: var(--bg-secondary);
                border-radius: var(--radius-md);
            }

            .palpite-row .input-x, 
            .palpite-row .input-y {
                width: 45px;
                height: 45px;
                font-size: 1rem;
                font-weight: 700;
            }

            .action-buttons {
                flex-direction: column;
                gap: var(--spacing-md);
                margin-top: var(--spacing-lg);
            }

            .action-buttons .btn {
                width: 100%;
                padding: var(--spacing-lg);
                font-size: 1rem;
                letter-spacing: 0.3px;
            }

            /* Modal responsivo */
            .modal-content {
                width: 95%;
                max-width: none;
                margin: var(--spacing-sm);
            }

            .modal-body {
                padding: var(--spacing-md);
                max-height: 70vh;
            }

            .modal-group-list li {
                padding: var(--spacing-md);
                font-size: 0.9rem;
                line-height: 1.4;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: var(--spacing-sm);
            }

            .main-title {
                font-size: clamp(1.5rem, 4vw, 1.8rem);
                margin-bottom: var(--spacing-md);
            }

            .card-subtitle {
                font-size: clamp(1rem, 3vw, 1.2rem);
                margin-bottom: var(--spacing-md);
            }

            .palpites-card {
                padding: var(--spacing-sm);
                margin-bottom: var(--spacing-md);
            }

            .palpite-row {
                padding: var(--spacing-sm);
                gap: var(--spacing-sm);
            }

            .palpite-row .input-x, 
            .palpite-row .input-y {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }

            .action-buttons .btn {
                padding: var(--spacing-md);
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="main-title">CRIE UMA IMAGEM DE DIVULGA√á√ÉO</h1>
        </div>

        <!-- Card de Palpites -->
        <div class="palpites-card">
            <h2 class="card-subtitle">üéØ Seus Palpites</h2>
            
            <!-- Palpite 1 -->
            <div class="palpite-row">
                <button class="select-group-btn" onclick="openGroupModal(1)">Selecionar Grupo</button>
                <div class="group-info" id="group-info-1">Nenhum grupo selecionado</div>
                <div class="input-xy-container">
                    <div class="input-xy">
                        <input type="text" class="input-x" id="input-x-1" maxlength="2" placeholder="00">
                        <input type="text" class="input-y" id="input-y-1" readonly>
                    </div>
                </div>
                <button class="clear-btn" onclick="clearPalpite(1)">Limpar</button>
            </div>

            <!-- Palpite 2 -->
            <div class="palpite-row">
                <button class="select-group-btn" onclick="openGroupModal(2)">Selecionar Grupo</button>
                <div class="group-info" id="group-info-2">Nenhum grupo selecionado</div>
                <div class="input-xy-container">
                    <div class="input-xy">
                        <input type="text" class="input-x" id="input-x-2" maxlength="2" placeholder="00">
                        <input type="text" class="input-y" id="input-y-2" readonly>
                    </div>
                </div>
                <button class="clear-btn" onclick="clearPalpite(2)">Limpar</button>
            </div>

            <!-- Palpite 3 -->
            <div class="palpite-row">
                <button class="select-group-btn" onclick="openGroupModal(3)">Selecionar Grupo</button>
                <div class="group-info" id="group-info-3">Nenhum grupo selecionado</div>
                <div class="input-xy-container">
                    <div class="input-xy">
                        <input type="text" class="input-x" id="input-x-3" maxlength="2" placeholder="00">
                        <input type="text" class="input-y" id="input-y-3" readonly>
                    </div>
                </div>
                <button class="clear-btn" onclick="clearPalpite(3)">Limpar</button>
            </div>

            <!-- Palpite 4 -->
            <div class="palpite-row">
                <button class="select-group-btn" onclick="openGroupModal(4)">Selecionar Grupo</button>
                <div class="group-info" id="group-info-4">Nenhum grupo selecionado</div>
                <div class="input-xy-container">
                    <div class="input-xy">
                        <input type="text" class="input-x" id="input-x-4" maxlength="2" placeholder="00">
                        <input type="text" class="input-y" id="input-y-4" readonly>
                    </div>
                </div>
                <button class="clear-btn" onclick="clearPalpite(4)">Limpar</button>
            </div>

            <!-- Palpite 5 -->
            <div class="palpite-row">
                <button class="select-group-btn" onclick="openGroupModal(5)">Selecionar Grupo</button>
                <div class="group-info" id="group-info-5">Nenhum grupo selecionado</div>
                <div class="input-xy-container">
                    <div class="input-xy">
                        <input type="text" class="input-x" id="input-x-5" maxlength="2" placeholder="00">
                        <input type="text" class="input-y" id="input-y-5" readonly>
                    </div>
                </div>
                <button class="clear-btn" onclick="clearPalpite(5)">Limpar</button>
            </div>

            <!-- Bot√µes de A√ß√£o -->
            <div class="action-buttons">
                <button class="btn" onclick="generateImage()">üñºÔ∏è Gerar Imagem</button>
                <button class="btn secondary" onclick="showPreview()">üëÅÔ∏è Visualizar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Grupo -->
    <div id="groupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Selecionar Grupo</h3>
                <button class="close-btn" onclick="closeModal('groupModal')">&times;</button>
            </div>
            <div class="modal-body">
                <ul class="modal-group-list">
                    <li onclick="selectGroup(1, 'Avestruz', 'ü¶Ü')">ü¶Ü Avestruz (01, 02, 03, 04)</li>
                    <li onclick="selectGroup(2, '√Åguia', 'ü¶Ö')">ü¶Ö √Åguia (05, 06, 07, 08)</li>
                    <li onclick="selectGroup(3, 'Burro', 'üê¥')">üê¥ Burro (09, 10, 11, 12)</li>
                    <li onclick="selectGroup(4, 'Borboleta', 'ü¶ã')">ü¶ã Borboleta (13, 14, 15, 16)</li>
                    <li onclick="selectGroup(5, 'Cachorro', 'üêï')">üêï Cachorro (17, 18, 19, 20)</li>
                    <li onclick="selectGroup(6, 'Cabra', 'üêê')">üêê Cabra (21, 22, 23, 24)</li>
                    <li onclick="selectGroup(7, 'Carneiro', 'üêë')">üêë Carneiro (25, 26, 27, 28)</li>
                    <li onclick="selectGroup(8, 'Camelo', 'üê™')">üê™ Camelo (29, 30, 31, 32)</li>
                    <li onclick="selectGroup(9, 'Cobra', 'üêç')">üêç Cobra (33, 34, 35, 36)</li>
                    <li onclick="selectGroup(10, 'Coelho', 'üê∞')">üê∞ Coelho (37, 38, 39, 40)</li>
                    <li onclick="selectGroup(11, 'Cavalo', 'üêé')">üêé Cavalo (41, 42, 43, 44)</li>
                    <li onclick="selectGroup(12, 'Elefante', 'üêò')">üêò Elefante (45, 46, 47, 48)</li>
                    <li onclick="selectGroup(13, 'Galo', 'üêì')">üêì Galo (49, 50, 51, 52)</li>
                    <li onclick="selectGroup(14, 'Gato', 'üê±')">üê± Gato (53, 54, 55, 56)</li>
                    <li onclick="selectGroup(15, 'Jacar√©', 'üêä')">üêä Jacar√© (57, 58, 59, 60)</li>
                    <li onclick="selectGroup(16, 'Le√£o', 'ü¶Å')">ü¶Å Le√£o (61, 62, 63, 64)</li>
                    <li onclick="selectGroup(17, 'Macaco', 'üêµ')">üêµ Macaco (65, 66, 67, 68)</li>
                    <li onclick="selectGroup(18, 'Porco', 'üê∑')">üê∑ Porco (69, 70, 71, 72)</li>
                    <li onclick="selectGroup(19, 'Pav√£o', 'ü¶ö')">ü¶ö Pav√£o (73, 74, 75, 76)</li>
                    <li onclick="selectGroup(20, 'Peru', 'ü¶É')">ü¶É Peru (77, 78, 79, 80)</li>
                    <li onclick="selectGroup(21, 'Touro', 'üêÇ')">üêÇ Touro (81, 82, 83, 84)</li>
                    <li onclick="selectGroup(22, 'Tigre', 'üêÖ')">üêÖ Tigre (85, 86, 87, 88)</li>
                    <li onclick="selectGroup(23, 'Urso', 'üêª')">üêª Urso (89, 90, 91, 92)</li>
                    <li onclick="selectGroup(24, 'Veado', 'ü¶å')">ü¶å Veado (93, 94, 95, 96)</li>
                    <li onclick="selectGroup(25, 'Vaca', 'üêÑ')">üêÑ Vaca (97, 98, 99, 00)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modal de Visualiza√ß√£o da Imagem - ATUALIZADO COM O ESTILO DO INDEX(2).HTML -->
    <div id="imageModal" class="image-modal">
        <div class="image-modal-header">
            <h3 class="image-modal-title">Visualizar Imagem</h3>
            <button class="image-modal-close" onclick="closeImageModal()">&times;</button>
        </div>
        <div class="image-modal-body">
            <div class="generated-image-container">
                <img id="generatedImage" src="" alt="Imagem gerada">
            </div>
        </div>
        <div class="image-modal-footer">
            <button class="btn download-btn" onclick="downloadImage()">
                üì• Baixar PNG
            </button>
            <button class="btn share-btn" onclick="shareImage()">
                üì§ Compartilhar
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <img src="/assets/images/logo.png" alt="77x Brasil" class="footer-logo">
            <div class="site-domain">77xbrasil.com</div>
            <div class="copyright-text">¬© 2024 77x Brasil. Todos os direitos reservados.</div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        let currentPalpiteIndex = 0;
        let currentImageBlob = null;

        // Dados dos grupos
        const grupos = {
            1: { nome: 'Avestruz', emoji: 'ü¶Ü', numeros: ['01', '02', '03', '04'] },
            2: { nome: '√Åguia', emoji: 'ü¶Ö', numeros: ['05', '06', '07', '08'] },
            3: { nome: 'Burro', emoji: 'üê¥', numeros: ['09', '10', '11', '12'] },
            4: { nome: 'Borboleta', emoji: 'ü¶ã', numeros: ['13', '14', '15', '16'] },
            5: { nome: 'Cachorro', emoji: 'üêï', numeros: ['17', '18', '19', '20'] },
            6: { nome: 'Cabra', emoji: 'üêê', numeros: ['21', '22', '23', '24'] },
            7: { nome: 'Carneiro', emoji: 'üêë', numeros: ['25', '26', '27', '28'] },
            8: { nome: 'Camelo', emoji: 'üê™', numeros: ['29', '30', '31', '32'] },
            9: { nome: 'Cobra', emoji: 'üêç', numeros: ['33', '34', '35', '36'] },
            10: { nome: 'Coelho', emoji: 'üê∞', numeros: ['37', '38', '39', '40'] },
            11: { nome: 'Cavalo', emoji: 'üêé', numeros: ['41', '42', '43', '44'] },
            12: { nome: 'Elefante', emoji: 'üêò', numeros: ['45', '46', '47', '48'] },
            13: { nome: 'Galo', emoji: 'üêì', numeros: ['49', '50', '51', '52'] },
            14: { nome: 'Gato', emoji: 'üê±', numeros: ['53', '54', '55', '56'] },
            15: { nome: 'Jacar√©', emoji: 'üêä', numeros: ['57', '58', '59', '60'] },
            16: { nome: 'Le√£o', emoji: 'ü¶Å', numeros: ['61', '62', '63', '64'] },
            17: { nome: 'Macaco', emoji: 'üêµ', numeros: ['65', '66', '67', '68'] },
            18: { nome: 'Porco', emoji: 'üê∑', numeros: ['69', '70', '71', '72'] },
            19: { nome: 'Pav√£o', emoji: 'ü¶ö', numeros: ['73', '74', '75', '76'] },
            20: { nome: 'Peru', emoji: 'ü¶É', numeros: ['77', '78', '79', '80'] },
            21: { nome: 'Touro', emoji: 'üêÇ', numeros: ['81', '82', '83', '84'] },
            22: { nome: 'Tigre', emoji: 'üêÖ', numeros: ['85', '86', '87', '88'] },
            23: { nome: 'Urso', emoji: 'üêª', numeros: ['89', '90', '91', '92'] },
            24: { nome: 'Veado', emoji: 'ü¶å', numeros: ['93', '94', '95', '96'] },
            25: { nome: 'Vaca', emoji: 'üêÑ', numeros: ['97', '98', '99', '00'] }
        };

        // Abrir modal de sele√ß√£o de grupo
        function openGroupModal(palpiteIndex) {
            currentPalpiteIndex = palpiteIndex;
            document.getElementById('groupModal').style.display = 'flex';
            document.body.classList.add('modal-open');
        }

        // Fechar modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.classList.remove('modal-open');
        }

        // Selecionar grupo
        function selectGroup(groupNumber, groupName, emoji) {
            const grupo = grupos[groupNumber];
            if (grupo) {
                document.getElementById(`group-info-${currentPalpiteIndex}`).textContent = `${emoji} ${groupName}`;
                document.getElementById(`group-info-${currentPalpiteIndex}`).dataset.group = groupNumber;
                
                // Limpar campos de entrada
                document.getElementById(`input-x-${currentPalpiteIndex}`).value = '';
                document.getElementById(`input-y-${currentPalpiteIndex}`).value = '';
            }
            closeModal('groupModal');
        }

        // Limpar palpite
        function clearPalpite(palpiteIndex) {
            document.getElementById(`group-info-${palpiteIndex}`).textContent = 'Nenhum grupo selecionado';
            document.getElementById(`group-info-${palpiteIndex}`).dataset.group = '';
            document.getElementById(`input-x-${palpiteIndex}`).value = '';
            document.getElementById(`input-y-${palpiteIndex}`).value = '';
        }

        // Gerar imagem
        function generateImage() {
            // Simular gera√ß√£o de imagem
            const canvas = document.createElement('canvas');
            canvas.width = 800;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');

            // Fundo
            ctx.fillStyle = '#041228';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // T√≠tulo
            ctx.fillStyle = '#f8fafc';
            ctx.font = 'bold 32px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('PALPITES 77x BRASIL', canvas.width / 2, 60);

            // Palpites
            let y = 120;
            for (let i = 1; i <= 5; i++) {
                const groupInfo = document.getElementById(`group-info-${i}`);
                const inputX = document.getElementById(`input-x-${i}`).value;
                const groupNumber = groupInfo.dataset.group;

                if (groupNumber && inputX) {
                    const grupo = grupos[groupNumber];
                    ctx.fillStyle = '#4FA2E8';
                    ctx.font = 'bold 24px Inter';
                    ctx.textAlign = 'left';
                    ctx.fillText(`${grupo.emoji} ${grupo.nome}: ${inputX}`, 50, y);
                    y += 40;
                }
            }

            // Converter para blob
            canvas.toBlob((blob) => {
                currentImageBlob = blob;
                const url = URL.createObjectURL(blob);
                document.getElementById('generatedImage').src = url;
                showToast('Imagem gerada com sucesso!');
            }, 'image/png');
        }

        // Mostrar preview
        function showPreview() {
            if (!currentImageBlob) {
                generateImage();
                setTimeout(() => {
                    openImageModal();
                }, 500);
            } else {
                openImageModal();
            }
        }

        // Abrir modal de imagem
        function openImageModal() {
            document.getElementById('imageModal').style.display = 'block';
            document.body.classList.add('modal-open');
        }

        // Fechar modal de imagem
        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.classList.remove('modal-open');
        }

        // Baixar imagem
        function downloadImage() {
            if (currentImageBlob) {
                const url = URL.createObjectURL(currentImageBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'palpites-77x-brasil.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showToast('Download iniciado!');
            }
        }

        // Compartilhar imagem
        function shareImage() {
            if (navigator.share && currentImageBlob) {
                const file = new File([currentImageBlob], 'palpites-77x-brasil.png', { type: 'image/png' });
                navigator.share({
                    title: 'Palpites 77x Brasil',
                    text: 'Confira meus palpites!',
                    files: [file]
                }).then(() => {
                    showToast('Imagem compartilhada!');
                }).catch(() => {
                    showToast('Erro ao compartilhar');
                });
            } else {
                showToast('Compartilhamento n√£o suportado');
            }
        }

        // Mostrar toast
        function showToast(message) {
            // Criar elemento de toast se n√£o existir
            let toast = document.getElementById('toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast';
                toast.className = 'toast';
                document.body.appendChild(toast);
            }

            toast.innerHTML = `
                <div class="toast-icon">‚úì</div>
                <span>${message}</span>
            `;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Adicionar eventos de input para valida√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            for (let i = 1; i <= 5; i++) {
                const inputX = document.getElementById(`input-x-${i}`);
                const inputY = document.getElementById(`input-y-${i}`);
                const groupInfo = document.getElementById(`group-info-${i}`);

                inputX.addEventListener('input', function() {
                    const value = this.value.padStart(2, '0');
                    const groupNumber = groupInfo.dataset.group;
                    
                    if (groupNumber && value.length === 2) {
                        const grupo = grupos[groupNumber];
                        if (grupo.numeros.includes(value)) {
                            inputY.value = value;
                            inputY.style.color = 'var(--accent-success)';
                        } else {
                            inputY.value = '';
                            inputY.style.color = 'var(--accent-danger)';
                        }
                    } else {
                        inputY.value = '';
                    }
                });

                // Permitir apenas n√∫meros
                inputX.addEventListener('keypress', function(e) {
                    if (!/[0-9]/.test(e.key) && !['Backspace', 'Delete', 'Tab', 'Enter'].includes(e.key)) {
                        e.preventDefault();
                    }
                });
            }
        });

        // Fechar modais ao clicar fora
        window.addEventListener('click', function(event) {
            const groupModal = document.getElementById('groupModal');
            const imageModal = document.getElementById('imageModal');
            
            if (event.target === groupModal) {
                closeModal('groupModal');
            }
            if (event.target === imageModal) {
                closeImageModal();
            }
        });
    </script>
</body>
</html>

